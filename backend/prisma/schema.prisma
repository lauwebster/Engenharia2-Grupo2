// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?
// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Usuario {
  id    Int     @id @default(autoincrement())
  nome  String
  email String  @unique
  senha String
  status Int
  permissao Int
}

model Instituicoes {
  idInstituicoes Int @id @default(autoincrement())
  nome String
  endereco String
  telefone String
  especialidade String
  Encaminhamentos Encaminhamentos[]
}
model Setor {
  idSetor Int @id @default(autoincrement())
  nomeSetor String
  Doacao Doacao[]
}
model Pacientes {
  idPaciente Int @id @default(autoincrement())
  nome String
  cpf String
  email String
  dataNascimento DateTime
  telefone String
  Encaminhamentos Encaminhamentos[]
  Agendar_Consulta Agendar_Consulta[]
}
model Encaminhamentos {
  id Int @id @default(autoincrement())
  data DateTime
  descricao String
  status String
  Instituicao Instituicoes? @relation(fields: [idInstituicao], references: [idInstituicoes])
  idInstituicao Int?
  Paciente Pacientes? @relation(fields: [idPacienteEnc], references: [idPaciente])
  idPacienteEnc Int?
}
model Recurso {
  idRecurso Int @id @default(autoincrement())
  descricao String
  dataRecebimento DateTime
  valor Decimal
  recursoUnico String
  origemRecurso String
}
model Doacao {
  idDoacao Int @id @default(autoincrement())
  dataDoacao DateTime
  valorDoacao Decimal
  metodoDoacao String
  dataDistribuicao DateTime
  setorDoacao Int?
  Setor Setor? @relation(fields: [setorDoacao], references: [idSetor])
}
model Agendar_Consulta {
  idAgendar_Consulta Int @id @default(autoincrement())
  dataConsulta DateTime
  anexos String
  Pacientes_idPaciente Int
  Paciente Pacientes? @relation(fields: [idPacienteConsul], references: [idPaciente])
  idPacienteConsul Int?
}
model Caixa {
  idCaixa Int @id @default(autoincrement())
  dataAbertura DateTime
  Despesa Despesa[]
}
model Despesa {
  idDespesa Int @id @default(autoincrement())
  descricao String
  dataVencimento DateTime
  valor Decimal
  metodoPagamento String
  dataPagamento DateTime
  Caixa Caixa? @relation(fields: [idCaixaDespesa], references: [idCaixa])
  idCaixaDespesa Int?
}